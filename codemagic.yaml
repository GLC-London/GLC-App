# Automatically generated on 2021-04-06 UTC from https://codemagic.io/app/606c03e0c7451cb72921876f/settings
# Note that this configuration is not an exact match to UI settings. Review and adjust as necessary.

workflows:
  default-workflow:
    name: Default Workflow
    max_build_duration: 60
    environment:
      vars:
        APP_STORE_CONNECT_ISSUER_ID: 2c6c0d9c-4018-480d-9232-e4ae6b790113
        APP_STORE_CONNECT_KEY_IDENTIFIER: 372CZL62W5
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmdiTGZNb2NPel9kbmg0ZW9CWHdxVTBoazdZajNhOHVvQldpNGNUVVlXZnRudTZleHlsOGFkLTJVVFpodWVGN25fVXlQd19yLVNNeFNMcDYxLWlsQzltTWFVd2UwWW55R0VNUWlVLXk1QWhXZ2N0UHNYQVdFaE05emFnc3pFYlEzaE1YeGNQamloS0poLURjRlY5dDJhd0dZZk5VRkNVWGhOSHJqcTlyVmNSRENUdDdOSjZmVmRuaVh1dEw2bjNHUldpQmNWZ3QtMWVHRkF1eFlXNjB3WlVlTllTaFhyYzBPYTRVSjFqb0thMHRtUUZZYy1FbnhIX2x0SDRtNnlkenppWW5yUXhlRGRJNkZsM1Y0THNTYXFyMDY3MzJxaVcyUDdqcUJrNEMteUlIc2xnNzBPVlYxWGI2Zy0zOHBqTmhSc1VubnRqM1RxdEJWV2FVaUNEeEU4MF9UYkwzWTRCSWdVR1k4QkdlWDh0N0daVkR4aUlQVWNPN1pWQTNTUVNLSXFDT0tPWDYySWlCREQzT3VpcG92dEhDMk5YT0kzdHZFWC1vZk1rZ2xXR09aSkRtZz0=)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmdiTGZNcURTaUdkcmQ3cnpsci1aWGstNTNHUUhyUGNSTlBfLVhFR0hjc3BGYUdQTkZFOFQ3NjRPYm1WTGtUZklWaDNIdXBpMHpuMndOZkVsWWxuUEJvaGlpbmQ2VF9PZ0NGN1hmc0JaaDVoN1dyVHJlOGFxUHZlX3hpc2phZFljT3pmVEZ1amNHX0Vqb04zaThDclhGZk1ReEtJeUVRbTd4SHlObGY3cWJieEFySzJSOFotRVBaSkMycXpqMEh2Mlg2LTlTV3dseXNERjFBTjdNZUxjNHhlUXJNVUdXUWlNWGkwT2ZnRTJQVHNra0ZmY05MRDA2TklLdnRXNlg2SXBEY2h1R1lkdkdSbXZuX1JmeDdFTEZoZ0dRYThBZUhmLUNqUWdOUVM1VTFTNkFOZk5nNXZ2SkgzWUJKWlFGblJNb1JobzZQSG01TGtFQ1ZZV09Ia3J3ZksyeWZHZGQxRWo5OGpzanB4bkloQ2JycVY0bnJyWFZJalIybzVPRDhjbl9iNEFzdXZVRVVmTE5UbFR2MEYwVlVrclEyeG9Kc1pfaTBvcFY4bVM5azRPV3dtWmE5cnVnZjF6V1B6cFJVVmpoVlBvZ1E0S0lSTnZmYkd3RHEtVUxMdzR0R25ZQ2ZIZ3JQQUlzY0thUGZHQW45WENkcElTNURLemk4ZUE4UnBZaHc5TFJTSmN1TmpMYU0tWDhBRmZVSW9pWGhZWlhzWWQybFpVVE5VSVhoWWc0aHE3VWpHQllNRmwtSmVib2dzR3BabUpVZ05KajhaN1NSSVc3UmR5dTJJVkpZVlNYakZ4RExGTGNITU1ZMlVmUkN6d3dINkN3cFlkTE93Tjg5ZEJYMTd1SUFhaGIyNzJSdU9HSmRsR1lsLVRBenBRQm8xTnRjOWZpQ2xDLVlHRlhUVkltUzNlaDZfVURmY2hIX3ZIRVJEM1Fqd1hzZWJPXzduYlgyZjhibnJrNmhjTlpJYzdBeU5ydDlDYkVZWE1MMVpreDRUdHJpallkV2dDVHJITlZXZDB6LVFlSGRsVVVtWkNtTklnMzBCUG4zeENrcFM2ZVhzdEI5M2Y4dU1MX0lCdTRhNFU0U095Y3Q1N1dOQmVyaDlKUDJCbzM5R3ZwUHFHRmVMckJlcGNuVWFLMzdwcWdqTDdrSDZrOTFUeUZodnhyT0V5LTFjLXRVMHNDQzNhYWZrR0liWHJvVVlZbV9XVUJTT3N0cnZWVkNpX3pwV2UzazNZM1hvX1dMZGwxamRDTTBjc3VQZ2dYODRKQzVMMmRpLUdfa2RFUDZRMGEzcm9YLWhrYnZOdy1LSGZhMVo2aVUtM0plc0dPYWFfbWlFRUZzek55QklHOFhPYzB1SFpVbVNxT1lycE1vS3M2SF9xR0Q2TDExUjBLZklUVGFYMG9QTjI2TXNybktLX0t0U1BzOHVmT2d2Y0d6ZG5XdHJwZWx6S01qZFpEd2tMS3JjMkw1WGJURENwajZOUDY0dnVCYVRFRElvdnJTT0UycExHVDdvSDdrbFRRaVpNMk9BNDVuMnV5S1cyWUI3S214RXpDelJOSk51TjJiQTFGZ3FzZlNKdVFDUHNtREpFcEI5eUFEMlpucFg1NDN1NjA1Y1Z1ZmU1aGIzVElfdnUwV01OaFFIMUhuQlV4bjd1SDVTeDNpTEFBVGdRQjN5N3VMaFAyaFBGcklqeXowYjBvb1JPWVAwdWVzdFFLUDB5TjFrMWRGeHl4R1dJNjZuT3dHTlhHbU5lUGJRMGp0dHZxY2dCSzJuRFluTkRLZW16X2hqM3p1WGJ5Q2ZhOEFKTDd0dVVVeHJNS2s0X21CbmFQTVNkMmYwc0dRYUJ4RjJpekZfRDlYUjRJeTFFbjR6dE1WNS0zQTNLaUpWUzRQaEk1bXpjRUpFemJrUjB6WDlOcUdFdHlsOVBsTDdNaUlYNzVmM2FCQmNhWGNGNTV5U0E3YkdTMFE2dk92dzJhUEt6bWIyRy1pVUNkaUxSbXBrWjQ5a3k4Y3RDcW44T3RqRXFXa2NVZ0xoXzBrZnpjU3dJMlNydE9rTWp1MEVURlhEblQ4ektWREpRY01YQmtOaGhCektPU3A0blc5MnJUelBUWUlHc1FlQkdsTGZsTUNGblNJZzlSbkxMNXRfa09PZDhkcHpnYzhhTEd3aHp0TVpIT3NYaUctcEUzWlBmZXNXeURrNzhKSXRHOEpic09ZdnZFdVMwSEo4RWQ0dHNJZlFyS1pBWmFxR1FLTWU0TlJTSUdBVWVBUkdHMW13eG5FYTE3U0tzaTN6dTQtMVVfNVlneFJHekVGZXBvOVc5MDl2QUhlU0NNU1ZvX2s5azBxWU12YTlTVk9ZQlZmd1VTbDV6VkVMSGs0Z2cwdHIyWjdtSnV0Y3gyRmFvZDNHVzR4cDN5QnpjXzR1QVBlbzEwaDhrakZUZ1VmdjV2ZU9lSGVmLVNNTEFuUk03NEE0RnkxTDlGMHd0aU1jZ3M4azhIWktpem1wRVN3VTZwZ1IxZ01JMXAwUGxPT1cwV3NoZWltWjBoMDZ6SU5ZX2l0RkR4eTBtWjVvUmxLQ1ZNMjBWNzgwSWR4dUx5U0RKd1FqenNiTThiLXYyY2dXWS1xSUNkcTNtVTVTU3lvWFJnN1dHVVhibEFwWmhFZWptclV6ZUFpdkswNXFqbDFlV28wRWRHMDJmX3ZQaFAtMDF1UlU2NkZtcVZ6c0ltcWs0LVBTbUVOLUluQU9Kc1gxYXRoQ3NSb0ZYcGlTYkFqbDl5X19IVjVCY3drTEw3Yk1vTUNVSDR0dDh0b2FtTXJ6ZlJkSlczVlBZUFJKSEJBYnJvVzk3SzNubEpGMlJ1ZVVNSTRySjJQd25tZm91SWd4cDQ1WWQ2Wm9wZWF2V05sRml4RERFSFhqMlRxU0dIUEk3TFdDeEhBX0JmSlJtRWFsd2lpM3FhOEFFSEJoa2ZCRlhnUDNQa3FTY1dfZTZyNllEUEVxRW10WkM2WWlEa1RYNjlTcTFoX3FyUUFVaGEyRVYxYXhISnB1OTZ2NVVqM3NiZHNyWVVnNDRpcHRsaUxaa0V3Q19SVVY1TU5TdjdyRkhS)
      flutter: stable
      xcode: latest
      cocoapods: default
    scripts:
      - |
        # set up debug keystore
        rm -f ~/.android/debug.keystore
        keytool -genkeypair \
          -alias androiddebugkey \
          -keypass android \
          -keystore ~/.android/debug.keystore \
          -storepass android \
          -dname 'CN=Android Debug,O=Android,C=US' \
          -keyalg 'RSA' \
          -keysize 2048 \
          -validity 10000
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/android/local.properties"
      - flutter packages pub get
      - flutter build apk --debug
      - find . -name "Podfile" -execdir pod install \;
      - keychain initialize
      - app-store-connect fetch-signing-files "$(xcode-project detect-bundle-id)"
        --type IOS_APP_STORE --create
      - keychain add-certificates
      - xcode-project use-profiles
      - flutter build ipa --export-options-plist=/Users/builder/export_options.plist
    artifacts:
      - build/**/outputs/**/*.apk
      - build/**/outputs/**/*.aab
      - build/**/outputs/**/mapping.txt
      - build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - nkenyor@gmail.com
